{% load static %}
{% load humanize %}
{% load realestate_filter %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
        <style>
            th { text-align: center; }
        </style>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="{% static 'js/common.js' %}"></script>
        <script type="text/javascript">
            $(function(){
                $('#btn_upload').click(function() {
                    var form = $('#form_file')[0];
                    var formData = new FormData(form);
 
                    $.ajax({
                        type: "POST",
                        url: "{% url 'realestate:address_upload' %}",
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function(response) {
                            if (response.result == "Success") {
                                alert("성공 : " + response.count + "\n실패 : " + response.errors);
                            }
                            else {
                                alert(response.result);
                            }
                        },
                        error: function(request, status, error) {
                            alert(error);
                        },
                    });
                });

            });
        </script>
    </head>
    <body>
        <form id="form_file">
            {% csrf_token %}
            <div>
                <input type="file" id="address_file" name="address_file" />
            </div>
            <div>
                <input type="button" id="btn_upload" value="업로드" />
            </div>
        </form>
        <table>
            <tr>
                <th width="50">id</th>
                <th width="100">법정동코드</th>
                <th width="100">시도</th>
                <th width="100">시군구</th>
                <th width="100">읍면</th>
                <th width="100">리</th>
                <th width="60">산</th>
                <th width="60">본번</th>
                <th width="60">부번</th>
                <th>비고</th>
            </tr>
        </table>
    </body>
</html>